<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Descuanto: descuentos en supermercados, ropa, servicios y restauración</title>
  <meta name="description" content="Descuanto · Aquí encontrarás descuentos en supermercados, servicios, ropa y calzado, y restauración. Página beta orientada a ofertas útiles cuando las necesitas." />
  <link rel="canonical" href="https://www.descuanto.es/" />
  <meta property="og:title" content="Descuanto: descuentos en supermercados, ropa, servicios y restauración" />
  <meta property="og:description" content="Encuentra descuentos en supermercados, servicios, ropa y calzado, y restauración. Página beta." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.descuanto.es/" />
  <meta property="og:image" content="https://www.descuanto.es/images/descuanto-logo.png" />
  <meta name="twitter:card" content="summary" />
  <!-- ⚠️ Sustituye con tu ID real de Google Tag Manager -->
  <!-- Ejemplo: GTM-ABC1234 -->
  <script>
    // Consent Mode v2: establecemos el consentimiento por defecto en "denied"
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    // Por defecto, TODO denegado (no se colocan cookies de analítica hasta aceptar)
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied',
      'functionality_storage': 'denied',
      'personalization_storage': 'denied',
      'security_storage': 'granted'
    });
  </script>
  <!-- Google Tag Manager (carga temprana, respetará Consent Mode) -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXXXXX');
  </script>
  <!-- /Google Tag Manager -->
  <style>
    :root{
      --bg:#ffffff; --fg:#111; --muted:#555; --brand:#111; --border:#eee; --card:#fafafa;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    .container{max-width:760px;margin:0 auto;padding:16px}
    header{padding:20px 0;border-bottom:1px solid var(--border)}
    .logo-wrap{display:flex;align-items:center;justify-content:center}
    .logo{height:40px; width:auto; display:block}
    .hero{padding:36px 0}
    .hero h1{font-size:28px;line-height:1.15;margin:0 0 8px;text-align:center}
    .hero p{font-size:16px;line-height:1.5;margin:0 0 24px;text-align:center;color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
    form{display:flex;flex-direction:column;gap:12px}
    label{font-weight:600;font-size:14px}
    input[type="tel"]{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:12px;font-size:16px}
    button{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;font-size:16px;background:var(--brand);color:#fff}
    .small{font-size:12px;color:var(--muted)}
    .success{display:none;margin-top:8px;font-size:14px;color:#0a7f44}
    footer{margin-top:40px;padding:20px 0;border-top:1px solid var(--border);text-align:center;font-size:12px;color:var(--muted)}
    footer a{color:inherit;text-decoration:underline}

    /* Banner cookies sencillo */
    #cookie-banner{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--border);padding:12px;z-index:9999;display:flex;gap:12px;align-items:center;justify-content:center;flex-wrap:wrap}
    #cookie-banner p{margin:0;font-size:13px;color:#222;text-align:center}
    #cookie-banner .actions{display:flex;gap:8px}
    #cookie-banner button{padding:8px 12px;border-radius:10px;font-size:13px}
    #cookie-accept{background:#111;color:#fff;border:0}
    #cookie-reject{background:#f2f2f2;color:#111;border:1px solid #e5e5e5}

    @media (min-width:720px){
      .hero h1{font-size:36px}
      .hero p{font-size:18px}
    }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Descuanto",
    "url": "https://www.descuanto.es/",
    "description": "Descuentos en supermercados, servicios, ropa y calzado, y restauración.",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.descuanto.es/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header class="container">
    <div class="logo-wrap">
      <!-- ⚠️ Reemplaza src por la ruta real del logo. Ej: /images/descuanto-logo.png -->
      <img class="logo" src="./images/descuanto-logo.png" alt="Descuanto: descuentos en supermercados, ropa, servicios y restauración" />
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Descuentos, cuándo los necesitas</h1>
      <p>Página beta, probando concepto de necesidad.</p>

      <div class="card">
        <form id="phone-form" novalidate>
          <label for="phone">Déjanos tu teléfono y te avisamos cuando estemos disponibles</label>
          <input id="phone" name="phone" type="tel" inputmode="tel" autocomplete="tel" placeholder="Ej. 612 345 678" 
                 aria-describedby="phone-help" required pattern="^(\+34)?[0-9]{9}$" />
          <button type="submit">Avísame</button>
          <p id="phone-help" class="small">Este número se usará <strong>solo</strong> para comunicar disponibilidad. <strong>Nunca</strong> se compartirá con terceros.</p>
          <p id="form-success" class="success">¡Gracias! Hemos recibido tu número.</p>
          <p id="form-error" class="success" style="color:#a40000">Revisa el formato del teléfono.</p>
        </form>
      </div>
      <p class="small" style="margin-top:10px">Al enviar aceptas nuestra <a href="/legal/privacidad.html" target="_blank" rel="noopener">Política de Privacidad</a> y la <a href="/legal/cookies.html" target="_blank" rel="noopener">Política de Cookies</a>.</p>
      <p class="small" style="text-align:center;margin-top:16px;color:#333">Aquí encontrarás <strong>descuentos</strong> en <strong>supermercados</strong>, <strong>servicios</strong>, <strong>ropa y calzado</strong> y <strong>restauración</strong>.</p>
    </section>
  </main>

  <footer>
    <div>© <span id="current-year"></span> Descuanto · <a href="/legal/privacidad.html">Privacidad</a> · <a href="/legal/cookies.html">Cookies</a> · Contacto DPO: <a href="mailto:dpo@descuanto.es">dpo@descuanto.es</a></div>
  </footer>

  <script>
    // Año automático
    document.getElementById('current-year').textContent = new Date().getFullYear();

    // Banner de cookies minimal (solo analíticas via Consent Mode v2)
    (function(){
      var consent = localStorage.getItem('cookies-consent');
      if(!consent){
        var banner = document.createElement('div');
        banner.id = 'cookie-banner';
        banner.innerHTML = `
          <p>Usamos únicamente cookies analíticas anónimas (GA4 vía GTM) para medir tráfico. Se activan solo si aceptas.</p>
          <div class="actions">
            <a href="/legal/cookies.html" target="_blank" rel="noopener" style="align-self:center;font-size:12px;text-decoration:underline;">Más info</a>
            <button id="cookie-reject">Rechazar</button>
            <button id="cookie-accept">Aceptar</button>
          </div>
        `;
        document.body.appendChild(banner);
        document.getElementById('cookie-accept').addEventListener('click', function(){
          localStorage.setItem('cookies-consent','accepted');
          // Actualizamos consentimiento para habilitar analíticas
          gtag('consent','update', { 'analytics_storage':'granted' });
          document.getElementById('cookie-banner').remove();
        });
        document.getElementById('cookie-reject').addEventListener('click', function(){
          localStorage.setItem('cookies-consent','rejected');
          // Mantenemos denied
          gtag('consent','update', { 'analytics_storage':'denied' });
          document.getElementById('cookie-banner').remove();
        });
      } else if(consent === 'accepted') {
        gtag('consent','update', { 'analytics_storage':'granted' });
      }
    })();

    // Manejo del formulario (sin backend por ahora): valida y muestra éxito.
// No se envía el número a ningún servidor. Solo UX local + evento anónimo en GTM (sin el número).
(function(){
  var form = document.getElementById('phone-form');
  var input = document.getElementById('phone');
  var okMsg = document.getElementById('form-success');
  var errMsg = document.getElementById('form-error');
  var submitBtn = form.querySelector('button[type="submit"]');

  form.addEventListener('submit', function(e){
    e.preventDefault();
    okMsg.style.display = 'none';
    errMsg.style.display = 'none';

    if(!input.checkValidity()){
      errMsg.style.display = 'block';
      return;
    }

    // UX local: deshabilitar botón, limpiar input y mostrar confirmación
    submitBtn.disabled = true;
    submitBtn.textContent = 'Recibido ✅';
    okMsg.style.display = 'block';

    // Guardamos un flag local para no volver a mostrar el formulario (opcional)
    try { localStorage.setItem('descuanto-phone-optin', 'true'); } catch(e) {}

    // IMPORTANTE: No enviamos el número a ningún sitio.
    // Disparamos un evento anónimo a GTM para métricas de conversión, sin datos personales.
    // Solo funcionará si el usuario aceptó cookies (consent mode activado arriba).
    try {
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: 'phone_optin',
        form_status: 'submitted',
        // NO incluir el teléfono ni datos personales
      });
    } catch(e) {}

    // Limpiamos el campo
    input.value = '';
  });
})();
  </script>
</body>
</html>

